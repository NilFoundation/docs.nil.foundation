import Tabs from '@theme/Tabs'
import TabItem from '@theme/TabItem'

# Using built-in types

The C++ and Rust dialects provided by `clang` and `rustc` respectively contain several built-in types and functions simplifying working with essential concepts in cryptography such as curves and hashes. This tutorial covers how this built-ins can be used in circuit code.

:::info[Using built-ins]

Using built-ins offers a more convenient syntax compared to importing types and functions from [**`crypto3`**](https://github.com/NilFoundation/crypto3) or other libraries.

:::


## Using built-in curves

The C++ and Rust dialects provided by `clang` and `rustc` respectively contain several built-in types simplifying working with elliptic curves. Here is a full list of these types.

- `__zkllvm_field_pallas_base`
- `__zkllvm_field_pallas_scalar`
- `__zkllvm_field_vesta_base`
- `__zkllvm_field_vesta_scalar`
- `__zkllvm_field_bls12381_base`
- `__zkllvm_field_bls12381_scalar`
- `__zkllvm_field_curve25519_base`
- `__zkllvm_field_curve25519_scalar`

:::info[Curve fields]

Each built-in curve has one `base` and one `scalar` type representing the different types of fields in elliptic cryptography.

:::

This tutorial shows how these types can be used when writing a circuit.

### Pallas curve example

The below example uses Pallas curve base types to conduct some calculations with a separate implementation of the power function.

<Tabs groupId='language'>
  <TabItem value='cpp' label='C++'>

    ```cpp

    #include <nil/crypto3/algebra/curves/pallas.hpp>

    __zkllvm_field_pallas_base pow(__zkllvm_field_pallas_base a, int n) {
        if (n == 0)
            return 1;

        __zkllvm_field_pallas_base res = 1;
        for (int i = 0; i < n; ++i) {
            res *= a;
        }
        return res;
    }

    [[circuit]] __zkllvm_field_pallas_base
        field_arithmetic_example(__zkllvm_field_pallas_base a,
                                __zkllvm_field_pallas_base b) {

        __zkllvm_field_pallas_base c = (a + b) * a + b * (a + b) * (a + b);
        const __zkllvm_field_pallas_base constant = 0x12345678901234567890_cppui255;
        return c * c * c / (b - a) + pow(a, 2) + constant;
    }

    ```

  </TabItem>

  <TabItem value='rust' label='Rust'>

    ```rust
    #![no_main]

    fn pow(a: __zkllvm_field_pallas_base, n: i32) -> __zkllvm_field_pallas_base {
        if n == 0 {
            let res: __zkllvm_field_pallas_base = 1g;
            return res;
        }

        let mut res: __zkllvm_field_pallas_base = 1g;
        for i in 0..n {
            res *= a;
        }
        res
    }

    #[circuit]
    pub fn field_arithmetic_example(
        a: __zkllvm_field_pallas_base,
        b: __zkllvm_field_pallas_base,
    ) -> __zkllvm_field_pallas_base {
        let c = (a + b) * a + b * (a + b) * (a + b);
        const CONSTANT: __zkllvm_field_pallas_base = 0x12345678901234567890g;

        let result = c * c * c / (b - a) + pow(a, 2) + CONSTANT;
        result
    }
    ```

  </TabItem>
</Tabs>

The same example would look as follows if built-in types were not used.

<Tabs groupId='language'>
  <TabItem value='cpp' label='C++'>

    ```cpp

    #include <nil/crypto3/algebra/curves/pallas.hpp>

    using namespace nil::crypto3::algebra::curves;
    typename pallas::base_field_type::value_type pow(typename pallas::base_field_type::value_type a, int n) {
        if (n == 0)
            return 1;

        typename pallas::base_field_type::value_type res = 1;
        for (int i = 0; i < n; ++i) {
            res *= a;
        }
        return res;
    }

    [[circuit]] typename pallas::base_field_type::value_type
        field_arithmetic_example(typename pallas::base_field_type::value_type a,
                                typename pallas::base_field_type::value_type b) {

        typename pallas::base_field_type::value_type c = (a + b) * a + b * (a + b) * (a + b);
        const typename pallas::base_field_type::value_type constant = 0x12345678901234567890_cppui255;
        return c * c * c / (b - a) + pow(a, 2) + constant;
    }
    ```

  </TabItem>

  <TabItem value='rust' label='Rust'>

    ```rust
    #![no_main]
    #![feature(const_trait_impl)]
    #![feature(effects)]

    use ark_ff::{Field, MontFp};
    use ark_pallas::Fq;

    pub fn pow(a: Fq, n: i32) -> Fq {
        if n == 0 {
            let res: Fq = Fq::ONE;
            return res;
        }

        let mut res: Fq = Fq::ONE;
        for i in 0..n {
            res *= a;
        }
        res
    }

    #[circuit]
    pub fn field_arithmetic_example(a: Fq, b: Fq) -> Fq {
        let c = (a + b) * a + b * (a + b) * (a + b);
        const CONSTANT: Fq = MontFp!("0x12345678901234567890");
        c * c * c / (b - a) + pow(a, 5) + CONSTANT
    }
    ```

  </TabItem>
</Tabs>